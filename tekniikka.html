<!DOCTYPE html>
<html lang="en">
<head>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta charset="utf-8">
  <meta name="author" content="Johannes Jokinen">
  <meta name="description" content="Portfolio">
  <meta name="keywords" content="Portfolio, Ticorporate, Tiko, Johannes">
  <link rel="stylesheet" type="text/css" href="index.css">
  <link rel="stylesheet" type="text/css" href="prism.css">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <title>Johannes Jokinen</title>
  <link rel="preconnect" href="https://fonts.gstatic.com/%22%3E">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;900&display=swap" rel="stylesheet">
</head>

<body>

  <nav id="navi">
    <div>
    </div>
    <div class="logo"><a href="index.html">
      <h3>Johannes Jokinen</h3>
  </a>
</div>
    <ul class="navig">
      <li> <a href="index.html">Etusivu</a></li>
      <li class="onsite"> <a href="tekniikka.html">Tekniikka</a></li>
      <li> <a href="scrum.html">Scrummaster</a></li>
      <li> <a href="reflektio.html">Reflektio</a></li>
    </ul>
    <div class="burger">
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
  </div>
  
  </nav>

  <div class="container">
    <br>
    <br>
    <br>
    <br>
    <h1>Tekniikka</h1>
  </div>

  <div class="esi">
    <p>Tällä sivulla kerron teknologiasta ja työkaluista, jota on tullut käytettyä projektin aikana.
    <br> Alle on listattu asiat joiden parissa tuli työskenneltyä, ja muutama pointti jokaisesta</p>
    
  </div>
  <div class="data">
    <div class="container-1">
      <div class="box-1">
        <h2>Angular</h2>
        <img id="angular" src="media/Angular.png" alt="jypi">
        <ul>
          <li>Typescript</li>
          <li>HTML</li>
          <li>CSS</li>
        </ul>
      </div>
      <div class="box-2">
        <h2>MySQL</h2>
        <img id="mysli" src="media/mysli2.png" alt="jypi">
      <ul>
        <li>Tietokantojen rakennus</li>
        <li>Tietokantojen muokkaus ja ylläpito</li>
        <li>PHPMyadmin</li>
      </ul>

      </div>
      <div class="box-3">
        <h2>Node.js</h2>
        <img id="node" src="media/node.png" alt="jypi">
        <ul>
          <li>Javascript</li>
          <li>Tietokannat</li>
          <li>Nodemailer</li>
        </ul>
      </div>
    </div>
    <div class="container-2">
      <div class="box-4">
        <h2>Sequelize</h2>
        <img id="seq" src="media/seq.png" alt="jypi">
        <ul>
          <li>Tietokantojen mallinnus backendiin</li>
          <li>Tietokantojen muokkaaminen frontendista</li>
        </ul>
      </div>

      <div class="box-5">
        <h2>Git</h2>
        <img id="seq" src="media/git.png" alt="jypi">
        <ul>
          <li>Github desktop</li>
          <li>Zenhub</li>
          <li>Gitin käyttö versionhallinnassa</li>
        </ul>
      </div>

      <div class="box-6">
        <h2>Muut sovellukset</h2>
        <img id="disc" src="media/disc.png" alt="jypi">
        <ul>
          <li>Discord</li>
          <li>Teams</li>
          <li>Zoom</li>
          <li>Visual studio code</li>
          <li>MAMP</li>
          <li>Postman</li>
        </ul>
      </div>
    </div>
  </div>
  <div class="teksis">
    <h1>Quizit</h1>
    <p>Minun vastuualueeseen kuului quizien toimintalogiikka. Tein töitä pääosin toisen koodarin kanssa yhdessä. Quizeja tehdessä pääsi tutustumaan
      tietokantoihin, backendiin ja frontendiin kunnolla. Projektin alussa, minulla oli jonkinnäköinen ajatus siitä, miten koko paketti yhdessä
    toimii, mutta tässä vaiheessa kaikkien osien yhdessä toimiminen alkaa olla jo ymmärrettävää, ja siitä on saanut paljon selkeämmän kuvan</p>
    <h2>Quizit - Tietokannat</h2>
    <p>Quizeja varten tietokantoihin piti luoda neljä eri taulua; Quiz, question, userquiz ja wronganswers. Tämän lisäksi komponenttiin piti hakea tiedot 
      käyttäjästä, tämän tasosta, ja mahdollistaa tietokantojen muokkaamisen quizin oikeiden vastausten määrästä riippuen. Alla olevissa kuvissa on demonstroituna
       tietokannan luomista, ja tietojen hakemista tietokannasta backendin kautta.
    </p>
    <div>
      <pre class="language-sql box"><code>
CREATE TABLE Quiz (
  quiz INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(30) NOT NULL,
  info VARCHAR(300) NOT NULL,
  reward INT NOT NULL,
  rewardxp INT NOT NULL
) ENGINE=INNODB;

CREATE TABLE Question (
  question_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  question VARCHAR(200) NOT NULL,
  correct VARCHAR(30) NOT NULL,
  mediaurl VARCHAR(100),
  quiz INT NOT NULL,
  CONSTRAINT question_quiz_fk 
      FOREIGN KEY (quiz) REFERENCES Quiz(quiz)
          ON UPDATE RESTRICT
          ON DELETE CASCADE
) ENGINE=INNODB;
        </code> </pre>
        <pre class="language-javascript box1"><code>
// Metodi, joka hakee tietyn quizin kysymykset kannasta
getQuestions: (req, res) => {
    Question.findAll({
        where: {
            quiz: req.params.quiz
        }
    }).then((questions) => {
        res.json(questions);
    }).catch((err) => {
        console.log(err);
    });
},

// Metodi, joka hakee kysymystä vastaavat väärät vastaukset
getWrongAnswers: (req, res) => {
    WrongAnswers.findAll({
        where: {
            question_id: req.params.question
        }
    }).then((answers) => {
        res.json(answers);
    }).catch((err) => {
        console.log(err);
    });
},
        </code> </pre>
    </div>

<h2 id="qbend">Quizit - Backend</h2>
    <p>Backendin puolella piti tehdä mahdolliseksi quizien löytäminen frontendiin tietokannoista, sekä niiden muokkaaminen frontendin tapahtumien perusteella.
      Päätimme käyttää sequelizea tietokantojen käsittelyyn, ja tämä osoittautui mielestäni toimivaksi ratkaisuksi. Alla esimerkit Sequelizen mallista ja metodista jolla
       lisätään käyttäjälle merkintä suoritetusta quizista.
    </p> 
<pre class="language-javascript box"><code>
const { Sequelize, DataTypes } = require('sequelize');
const sequelize = require('../dbconnection');

// Sequelize-malli quizeille
const Quiz = sequelize.define('Quiz', {
    quiz: {
        type: DataTypes.INTEGER,
        allowNull: false,
        primaryKey: true,
        autoIncrement: true
    },
    title: {
        type: DataTypes.STRING,
        allowNull: false
    },
    info: {
        type: DataTypes.STRING,
        allowNull: false
    },
    reward: {
        type: DataTypes.INTEGER,
        allowNull: false
    },
    rewardxp: {
        type: DataTypes.INTEGER,
        allowNull: false
    }
}, { 
    freezeTableName: true
});

module.exports = Quiz;
</code> </pre>

<pre class="language-javascript box1"><code>
updateQuizCompleted: (req, res) => {
  UserQuiz.increment('completed', {
      where: {
          userid: req.body.userid,
          quiz: req.body.quiz 
      }
  }).then(() => {
      res.json('Completed updated by +1');
  }).catch((err) => {
      console.log(err);
  });
},
</code> </pre>


<h2 class="fend">Quizit - Frontend</h2>





  </div>

 <script src="fsa.js"></script>
 <script src="prism.js"></script>
</body>

</html>